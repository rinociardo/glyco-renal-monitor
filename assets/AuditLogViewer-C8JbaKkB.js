import{d as w,r as d,o as k,c as D,b as i,e as n,f as t,k as m,l as v,F as T,m as S,p as g,x as a,j as U,_ as V}from"./index-BgeBt-Vw.js";import{u as y}from"./entriesStore-CHOMCKDn.js";const x={class:"audit-log"},A={class:"controls"},B={key:0},E={key:1},L=w({__name:"AuditLogViewer",setup(N){const p=y(),s=d("tutti"),r=d("1w"),u=d(10);k(()=>{p.loadEntries()});const f=D(()=>{const l=new Date,e={"1w":new Date(l.getTime()-10080*60*1e3),"15d":new Date(l.getTime()-360*60*60*1e3),"1m":new Date(l.getTime()-720*60*60*1e3),"6m":new Date(l.getTime()-4320*60*60*1e3)}[r.value];return p.entries.filter(o=>!o.agent_feedback||new Date(o.timestamp)<e?!1:s.value==="tutti"?!0:o.agent_feedback.severity===s.value).sort((o,b)=>new Date(b.timestamp).getTime()-new Date(o.timestamp).getTime()).slice(0,u.value)});return(l,e)=>(n(),i("div",x,[e[14]||(e[14]=t("h2",null,"🧠 Registro Suggerimenti Agente",-1)),t("div",A,[e[6]||(e[6]=t("label",{for:"severity"},"Severità:",-1)),m(t("select",{id:"severity","onUpdate:modelValue":e[0]||(e[0]=o=>s.value=o)},[...e[3]||(e[3]=[t("option",{value:"tutti"},"Tutti",-1),t("option",{value:"bassa"},"Bassa",-1),t("option",{value:"media"},"Media",-1),t("option",{value:"alta"},"Alta",-1)])],512),[[v,s.value]]),e[7]||(e[7]=t("label",{for:"range"},"Intervallo:",-1)),m(t("select",{id:"range","onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o)},[...e[4]||(e[4]=[t("option",{value:"1w"},"Ultima settimana",-1),t("option",{value:"15d"},"Ultimi 15 giorni",-1),t("option",{value:"1m"},"Ultimo mese",-1),t("option",{value:"6m"},"Ultimi 6 mesi",-1)])],512),[[v,r.value]]),e[8]||(e[8]=t("label",{for:"count"},"Numero voci:",-1)),m(t("select",{id:"count","onUpdate:modelValue":e[2]||(e[2]=o=>u.value=o)},[...e[5]||(e[5]=[t("option",{value:6},"6",-1),t("option",{value:10},"10",-1),t("option",{value:20},"20",-1)])],512),[[v,u.value]])]),f.value.length>0?(n(),i("ul",B,[(n(!0),i(T,null,S(f.value,o=>(n(),i("li",{key:o.entry_id},[t("strong",null,a(new Date(o.timestamp).toLocaleString()),1),e[9]||(e[9]=t("br",null,null,-1)),e[10]||(e[10]=g(" ⚠️ ",-1)),t("em",null,a(o.agent_feedback?.suggestion),1),e[11]||(e[11]=t("br",null,null,-1)),g(" 🔍 Regola: "+a(o.agent_feedback?.rule_triggered),1),e[12]||(e[12]=t("br",null,null,-1)),e[13]||(e[13]=g(" 🧭 Severità: ",-1)),t("span",{class:U(["badge",o.agent_feedback?.severity])},a(o.agent_feedback?.severity),3)]))),128))])):(n(),i("p",E,"Nessun suggerimento trovato per il filtro selezionato."))]))}}),M=V(L,[["__scopeId","data-v-b2af1c07"]]);export{M as default};
